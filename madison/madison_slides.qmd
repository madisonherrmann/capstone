---
title: 'Developing a "Smart" Recovery Monitoring and Support System'
author: "Madison Herrmann & Tianrun Zhu"
institute: "University of Wisconsin-Madison"
date: December 13, 2024
format: 
  revealjs:
    scrollable: true
    css: chm.css
    slide-number: false 
title-slide-attributes:
  data-background-image:  https://github.com/jjcurtin/lectures/blob/main/images/smartphone_know_you.png?raw=true
  data-background-size: 35%
  data-background-repeat: no
  data-background-position: left 10% bottom 10%
include-after: |
  <script type="text/javascript">
    Reveal.on('ready', event => {
      if (event.indexh === 0) {
        document.querySelector("div.has-logo > img.slide-logo").style.display = "block";
        document.querySelector("div.has-logo > img.slide-logo").style.display = "block";
        document.querySelector("div.has-logo > img.slide-logo").style.display = "none";
        Reveal.configure({ slideNumber: null });
        Reveal.configure({ slideNumber: 'c' });
editor_options: 
  chunk_output_type: console
---
**Replace background image**
```{r}
#| echo: false
#| message: false
#| warning: false

library(skimr)
library(tidyverse) 
library(knitr)
library(kableExtra, exclude = c("group_rows"))
#devtools::source_url("https://github.com/jjcurtin/lab_support/blob/main/fun_eda.R?raw=true")
#devtools::source_url("https://github.com/jjcurtin/lab_support/blob/main/format_path.R?raw=true")
#devtools::source_url("https://github.com/jjcurtin/lab_support/blob/main/fun_plots.R?raw=true")
theme_set(theme_classic())
options(dplyr.print_max=Inf)

#path_processed_opt <- format_path("studydata/optimize/data_processed")
#path_processed <- format_path("studydata/risk2/data_processed/shared")
```

```{r}
#| message: false
#| warning: false

# Read in data
#intake <- read_csv(here::here(path_processed, "survey_intake_wide.csv"))
#ema <- read_rds(here::here(path_processed_opt, "ema_1day_shapley_labels.rds"))
```

## Alcohol Use Disorder and Opioid Use Disorder

-   Chronic
-   Continuous care is essential to recovery  
-   Barriers to treatment
    -   Accessibility
    -   Affordability
    -   Stigmatization

:::{.notes}Alcohol and Opioid use disorders are chronic, requiring lifelong management, however there are many barriers to accessing continued care in the United States, like affordability. Stigmatization of substance use disorders creates an even bigger challenge for individuals to receive initial access to treatment.
:::

## Developing a "Smart" Recovery Monitoring and Support System

-   Goal
    -   Implement risk-monitoring system
    -   Improve clinical outcomes
    -   Mitigate health disparities
    
:::{.notes}Our aim is to implement a risk-monitoring system that can deliver real-time interventions and improve clinical outcomes, while mitigating barriers in accessibility.
:::

## How can we provide the **right interventions and supports** to the **right people** at the **right time**, **every time**?

-   Recovery is dynamic
-   Important risk factors differ across people and time
-   Continuous monitoring needed to deploy the right intervention, at the right        time, for each individual. 

:::{.notes}Recovery is dynamic in nature as important risk factors at one moment might not be the same across time. That is, interventions that support early recovery might differ from what is needed later. For example, craving might be the most important feature impacting lapse probability in early recovery, requiring interventions like urge-surfing. Over-time, the importance of craving will likely decrease, given the individual is engaging with the interventions. However, the same individual could have a stressful event that increases lapse probability and requires a different intervention, like attending an AA meeting. Hence, the factors contributing to lapse risk require continuous monitoring to deploy the necessary intervention, for that individual, at that particular moment in time.
:::

## Monitoring Lapse Risk 

::: incremental
- Active Sensing
  - Ecological Momentary Assessment
- Passive Sensing
  - Geolocation
  - Cellular Communications 
:::
  
:::{.notes} Lapse risk is monitored through active and passive sensing. Ecological momentary assessments refer to daily self-report measures that assess mood, experiences, and past use. Through passive sensing methods, geolocation and cellular communication data was also collected. These methods were used over the course of three months with the aim of prediciting lapse in indivbiduals' recovering from alochol use disorder.
:::

## AUD Characteristics

::: {.columns}
:::: {.column width="60%"}
- 151 individuals with moderate to severe AUD

\

- Early in recovery (1-8 weeks)

\

- Committed to abstinence throughout study
::::

:::: {.column width="40%"}
![dsm.png]
::::
:::

:::{.notes} Data was collected on 151 individuals with moderate to severe AUD in early stages of recovery. The majorirty of particoants reported having over 10 symptoms of AUD.
:::

## AUD Characteristics

![](aud_demographics.png){width=100% height=100%}


:::{.notes}We had reasonble diversity across many charactersitics including age, sex at birth, maritital status, education, and income. However, given the recuriting methods, there is very little racial and ethinic diversity in the sample. The sample is predominately white and non-hispanic.
::: 

## Predicting Lapse in AUD

::: incremental
- Model trained with EMA achieved an outstanding AUC of 0.91
- How do we implement model for clinical benefit? 
  - Retrained model with geolocation and EMA
  - Key step towards real-time risk-prediction system
:::

:::{.notes}A previous model based solely on self-report measures achieved an outstanding AUC of 0.91, far surpassing industry benchmarks. Now that we have this model, how can we implement it for clinical benefit? My updated model is a key step toward deploying real-time risk-prediction systems, improving access to continuous care in this chronic disorder. To do this, I retrained the model with both EMA and geo-location to predict the probability of lapse risk in individuals recovering from alcohol use disorder. The addition of geo-location provides information on risky locations and people, increasing temporal precision. The model was trained using high throughput computing with algorithm and resulted in an AUC of ....
:::

## Important Features

::: incremental
- Globally Important
  - Past use
  - Future Efficacy
  - Craving
- Local Importance: SHAPs
  -   Negative values represent EMA items that decrease the probability of lapse.
  -   Positive values indicate an increased probability. 
:::

:::{.notes} Across participants, past use, future efficacy, and craving were the most important predictors of lapse. However, different risk factors effect differnt people at different times. Shap values reveal which EMA items change lapse probability. Negative values decrease lapse probability, while positive values increase it.  Lets look at the most important features for a specific particpant across the study.
:::

## Important Features

::: {.columns}
::: {.column width="50%"}
::: incremental
![Past Stress](past_stress.png)
:::
:::

::: {.column width="50%"}
::: incremental
![Subid 190](subid_190.png)
:::
:::
:::

:::{.notes}Past use is intially their most important feature contributing to an increase in lapse probability. After day 10, future efficacy is briefly the most important feature before shifting back to past use. By day 40, it appears craving is now driving lapse probability the most, until around day 60. The other features are mostly static across 0, indicating little impact on lapse probability for this individual. Now let's compare to another subject.This particpant did not lapse aross the study, as past use consistently lowered lapse probability. Intially the most important feature increasing lapse probability is past stressful event, but it's quickly replaced by craving. Around day 10 future efficiacy is increasing lapse risk the most, but drops off around day 25 when past pleasent event surpasses it. Future effiacy appears to have the biggest effect on lapse risk, given the variatian. Across time, arousal, past stressful event, craving, future effiacy, and past pleasent event were the most important features influencing laspe risk for this participant. The difference in risk factors over time emphasizes the need for tailor-made, temporally-precise interventions that support continious recovery.
::: 

## OUD Characteristics

## Predicting Lapse in OUD

## Future Directions

::: incremental
- Measuring trust, engagement, usability
:::